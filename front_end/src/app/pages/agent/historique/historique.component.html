<h2>ğŸ“„ Historique des transactions</h2>

<input type="text" [(ngModel)]="filtreDate" placeholder="ğŸ” Filtrer par date (jj/mm/aaaa)" />

<div *ngIf="message" class="message">{{ message }}</div>
<p *ngIf="transactionsFiltres.length === 0">Aucune transaction trouvÃ©e</p>

<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Type</th>
      <th>Utilisateur</th>
      <th>RÃ´le</th>
      <th>Compte</th>
      <th>Montant</th>
      <th>Frais</th>
      <th>Statut</th>
      <th>AnnulÃ© par</th>
      <th>Motif</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let t of transactionsFiltres">
      <td>{{ t.date_transaction | date:'dd/MM/yyyy HH:mm' }}</td>
      <td>{{ t.type }}</td>
      <td>{{ t.utilisateur }}</td>
      <td>{{ t.role_utilisateur }}</td>
      <td>{{ t.compte }}</td>
      <td>{{ t.montant | currency:'XOF':'symbol':'1.0-0' }}</td>
      <td>{{ t.frais | currency:'XOF':'symbol':'1.0-0' }}</td>
      <td>
        <span *ngIf="t.statut === 'valide'">âœ…</span>
        <span *ngIf="t.statut === 'annuler'">âŒ</span>
        <span *ngIf="t.statut === 'en_attente'">â³</span>
      </td>
      <td>{{ t.annule_par || 'â€”' }}</td>
      <td>{{ t.motif_annulation || 'â€”' }}</td>
      <td>
        <button *ngIf="t.statut === 'valide'" (click)="annuler(t.id)" class="annuler-btn">Annuler</button>
      </td>
    </tr>
  </tbody>
</table>
<div *ngIf="transactionsFiltres.length > 0" class="total">
  Total des transactions affichÃ©es : {{ transactionsFiltres.length }}</div>